<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>前端工程 | 二求</title>
    <meta name="description" content="求真、求知">
    <link rel="icon" href="/logo.jpeg">
    
    <link rel="preload" href="/assets/css/0.styles.815e519c.css" as="style"><link rel="preload" href="/assets/js/app.d6d7bd30.js" as="script"><link rel="preload" href="/assets/js/2.b4f839d5.js" as="script"><link rel="preload" href="/assets/js/155.7872800c.js" as="script"><link rel="prefetch" href="/assets/js/10.b1b49877.js"><link rel="prefetch" href="/assets/js/100.41d5d35b.js"><link rel="prefetch" href="/assets/js/101.756993f6.js"><link rel="prefetch" href="/assets/js/102.fe0bb5d0.js"><link rel="prefetch" href="/assets/js/103.8b76eece.js"><link rel="prefetch" href="/assets/js/104.37d0fd72.js"><link rel="prefetch" href="/assets/js/105.371a146e.js"><link rel="prefetch" href="/assets/js/106.e3631215.js"><link rel="prefetch" href="/assets/js/107.60f64855.js"><link rel="prefetch" href="/assets/js/108.492170e0.js"><link rel="prefetch" href="/assets/js/109.821d1f00.js"><link rel="prefetch" href="/assets/js/11.616581c6.js"><link rel="prefetch" href="/assets/js/110.229af73a.js"><link rel="prefetch" href="/assets/js/111.25feb06e.js"><link rel="prefetch" href="/assets/js/112.8c3bec90.js"><link rel="prefetch" href="/assets/js/113.0b16118b.js"><link rel="prefetch" href="/assets/js/114.d0f4c5b1.js"><link rel="prefetch" href="/assets/js/115.e1c3b140.js"><link rel="prefetch" href="/assets/js/116.4042a563.js"><link rel="prefetch" href="/assets/js/117.f82e46e8.js"><link rel="prefetch" href="/assets/js/118.9af14e27.js"><link rel="prefetch" href="/assets/js/119.3d00ff25.js"><link rel="prefetch" href="/assets/js/12.2f45d875.js"><link rel="prefetch" href="/assets/js/120.2be0a2e2.js"><link rel="prefetch" href="/assets/js/121.8bcfa662.js"><link rel="prefetch" href="/assets/js/122.38600584.js"><link rel="prefetch" href="/assets/js/123.8febd9f7.js"><link rel="prefetch" href="/assets/js/124.b97fd44f.js"><link rel="prefetch" href="/assets/js/125.cfc3ca7c.js"><link rel="prefetch" href="/assets/js/126.00d2c7c7.js"><link rel="prefetch" href="/assets/js/127.eaf1b840.js"><link rel="prefetch" href="/assets/js/128.f7de5b76.js"><link rel="prefetch" href="/assets/js/129.9cc29379.js"><link rel="prefetch" href="/assets/js/13.51caf78d.js"><link rel="prefetch" href="/assets/js/130.dab49373.js"><link rel="prefetch" href="/assets/js/131.317c7623.js"><link rel="prefetch" href="/assets/js/132.536e8ba1.js"><link rel="prefetch" href="/assets/js/133.10bf998c.js"><link rel="prefetch" href="/assets/js/134.382a24d1.js"><link rel="prefetch" href="/assets/js/135.5a494fa9.js"><link rel="prefetch" href="/assets/js/136.fc332db8.js"><link rel="prefetch" href="/assets/js/137.03cab604.js"><link rel="prefetch" href="/assets/js/138.a06d893b.js"><link rel="prefetch" href="/assets/js/139.21d478db.js"><link rel="prefetch" href="/assets/js/14.4b692a83.js"><link rel="prefetch" href="/assets/js/140.310db980.js"><link rel="prefetch" href="/assets/js/141.1bd566da.js"><link rel="prefetch" href="/assets/js/142.9f7f93b2.js"><link rel="prefetch" href="/assets/js/143.1511771d.js"><link rel="prefetch" href="/assets/js/144.3cfd8f6f.js"><link rel="prefetch" href="/assets/js/145.249e3e9d.js"><link rel="prefetch" href="/assets/js/146.7a72f4f8.js"><link rel="prefetch" href="/assets/js/147.7614af4f.js"><link rel="prefetch" href="/assets/js/148.6bb453d0.js"><link rel="prefetch" href="/assets/js/149.055405c6.js"><link rel="prefetch" href="/assets/js/15.d340842c.js"><link rel="prefetch" href="/assets/js/150.99473e02.js"><link rel="prefetch" href="/assets/js/151.4fc52cd8.js"><link rel="prefetch" href="/assets/js/152.4d63743c.js"><link rel="prefetch" href="/assets/js/153.0768b87e.js"><link rel="prefetch" href="/assets/js/154.59db61d6.js"><link rel="prefetch" href="/assets/js/156.f8c5451a.js"><link rel="prefetch" href="/assets/js/157.f671c489.js"><link rel="prefetch" href="/assets/js/158.2718e4fb.js"><link rel="prefetch" href="/assets/js/159.c8651b00.js"><link rel="prefetch" href="/assets/js/16.9ffc5104.js"><link rel="prefetch" href="/assets/js/160.dd04a230.js"><link rel="prefetch" href="/assets/js/161.428da18c.js"><link rel="prefetch" href="/assets/js/162.922ff831.js"><link rel="prefetch" href="/assets/js/163.b4cae29f.js"><link rel="prefetch" href="/assets/js/164.710c3b9e.js"><link rel="prefetch" href="/assets/js/165.3c481fdd.js"><link rel="prefetch" href="/assets/js/166.3a922d69.js"><link rel="prefetch" href="/assets/js/167.3749920c.js"><link rel="prefetch" href="/assets/js/168.78450896.js"><link rel="prefetch" href="/assets/js/169.c3c901be.js"><link rel="prefetch" href="/assets/js/17.ad8258b6.js"><link rel="prefetch" href="/assets/js/170.68db80ff.js"><link rel="prefetch" href="/assets/js/171.01938f86.js"><link rel="prefetch" href="/assets/js/172.19200899.js"><link rel="prefetch" href="/assets/js/173.33abaff0.js"><link rel="prefetch" href="/assets/js/174.6373c31f.js"><link rel="prefetch" href="/assets/js/175.73b55069.js"><link rel="prefetch" href="/assets/js/176.6927d199.js"><link rel="prefetch" href="/assets/js/177.3cef127d.js"><link rel="prefetch" href="/assets/js/178.66d0355e.js"><link rel="prefetch" href="/assets/js/179.87459566.js"><link rel="prefetch" href="/assets/js/18.7f1a24ae.js"><link rel="prefetch" href="/assets/js/180.ac882a7b.js"><link rel="prefetch" href="/assets/js/181.c33931de.js"><link rel="prefetch" href="/assets/js/182.f909dc4d.js"><link rel="prefetch" href="/assets/js/183.c9d07fc8.js"><link rel="prefetch" href="/assets/js/184.5bff7531.js"><link rel="prefetch" href="/assets/js/185.c0516b65.js"><link rel="prefetch" href="/assets/js/186.21338e81.js"><link rel="prefetch" href="/assets/js/187.946b2cf6.js"><link rel="prefetch" href="/assets/js/188.19e6875c.js"><link rel="prefetch" href="/assets/js/189.950d7836.js"><link rel="prefetch" href="/assets/js/19.c1560aff.js"><link rel="prefetch" href="/assets/js/190.dc3a0956.js"><link rel="prefetch" href="/assets/js/191.a89ae8df.js"><link rel="prefetch" href="/assets/js/20.9260924b.js"><link rel="prefetch" href="/assets/js/21.65f1efff.js"><link rel="prefetch" href="/assets/js/22.be75ce04.js"><link rel="prefetch" href="/assets/js/23.17b93657.js"><link rel="prefetch" href="/assets/js/24.4e806ec0.js"><link rel="prefetch" href="/assets/js/25.7a47ba3d.js"><link rel="prefetch" href="/assets/js/26.10555e43.js"><link rel="prefetch" href="/assets/js/27.9ab2e886.js"><link rel="prefetch" href="/assets/js/28.464bfd0b.js"><link rel="prefetch" href="/assets/js/29.147c3c3e.js"><link rel="prefetch" href="/assets/js/3.ae13c7e2.js"><link rel="prefetch" href="/assets/js/30.1839e4ae.js"><link rel="prefetch" href="/assets/js/31.ba250177.js"><link rel="prefetch" href="/assets/js/32.2e8e1032.js"><link rel="prefetch" href="/assets/js/33.fbc281e4.js"><link rel="prefetch" href="/assets/js/34.54248493.js"><link rel="prefetch" href="/assets/js/35.ca5cce0c.js"><link rel="prefetch" href="/assets/js/36.41daf552.js"><link rel="prefetch" href="/assets/js/37.adff1529.js"><link rel="prefetch" href="/assets/js/38.1d83ae34.js"><link rel="prefetch" href="/assets/js/39.7c0d1c42.js"><link rel="prefetch" href="/assets/js/4.344789e1.js"><link rel="prefetch" href="/assets/js/40.03de3754.js"><link rel="prefetch" href="/assets/js/41.5f600ebc.js"><link rel="prefetch" href="/assets/js/42.3a69a1da.js"><link rel="prefetch" href="/assets/js/43.016ba91f.js"><link rel="prefetch" href="/assets/js/44.246c2933.js"><link rel="prefetch" href="/assets/js/45.07984b9a.js"><link rel="prefetch" href="/assets/js/46.c5ecd7b5.js"><link rel="prefetch" href="/assets/js/47.094dfcd4.js"><link rel="prefetch" href="/assets/js/48.b8a16cae.js"><link rel="prefetch" href="/assets/js/49.b75c635b.js"><link rel="prefetch" href="/assets/js/5.35065344.js"><link rel="prefetch" href="/assets/js/50.0e162e39.js"><link rel="prefetch" href="/assets/js/51.204a1d3b.js"><link rel="prefetch" href="/assets/js/52.06c39343.js"><link rel="prefetch" href="/assets/js/53.4ecca16e.js"><link rel="prefetch" href="/assets/js/54.bc6e31c0.js"><link rel="prefetch" href="/assets/js/55.7ecb8df2.js"><link rel="prefetch" href="/assets/js/56.ae5d5929.js"><link rel="prefetch" href="/assets/js/57.97f963f9.js"><link rel="prefetch" href="/assets/js/58.5ca79d83.js"><link rel="prefetch" href="/assets/js/59.6284686c.js"><link rel="prefetch" href="/assets/js/6.6380ed51.js"><link rel="prefetch" href="/assets/js/60.def79891.js"><link rel="prefetch" href="/assets/js/61.6bac82f1.js"><link rel="prefetch" href="/assets/js/62.a4424a82.js"><link rel="prefetch" href="/assets/js/63.758a5158.js"><link rel="prefetch" href="/assets/js/64.874586a5.js"><link rel="prefetch" href="/assets/js/65.039191db.js"><link rel="prefetch" href="/assets/js/66.1c70303b.js"><link rel="prefetch" href="/assets/js/67.0ca8192d.js"><link rel="prefetch" href="/assets/js/68.52eb13c7.js"><link rel="prefetch" href="/assets/js/69.0ed4eccd.js"><link rel="prefetch" href="/assets/js/7.b6a5bde7.js"><link rel="prefetch" href="/assets/js/70.92e5b6c3.js"><link rel="prefetch" href="/assets/js/71.34876a3e.js"><link rel="prefetch" href="/assets/js/72.ddf7923e.js"><link rel="prefetch" href="/assets/js/73.37cfc35f.js"><link rel="prefetch" href="/assets/js/74.bf1d995b.js"><link rel="prefetch" href="/assets/js/75.4d15f62e.js"><link rel="prefetch" href="/assets/js/76.f8723817.js"><link rel="prefetch" href="/assets/js/77.2f0c7a44.js"><link rel="prefetch" href="/assets/js/78.06255684.js"><link rel="prefetch" href="/assets/js/79.8816ca0f.js"><link rel="prefetch" href="/assets/js/8.e77c0130.js"><link rel="prefetch" href="/assets/js/80.adde5e4d.js"><link rel="prefetch" href="/assets/js/81.577e48e6.js"><link rel="prefetch" href="/assets/js/82.f653b658.js"><link rel="prefetch" href="/assets/js/83.f269d445.js"><link rel="prefetch" href="/assets/js/84.0e215428.js"><link rel="prefetch" href="/assets/js/85.63a1d55d.js"><link rel="prefetch" href="/assets/js/86.3c936e8d.js"><link rel="prefetch" href="/assets/js/87.d52812bf.js"><link rel="prefetch" href="/assets/js/88.5044c4ba.js"><link rel="prefetch" href="/assets/js/89.1331e300.js"><link rel="prefetch" href="/assets/js/9.d8081037.js"><link rel="prefetch" href="/assets/js/90.52f53c55.js"><link rel="prefetch" href="/assets/js/91.0f74a483.js"><link rel="prefetch" href="/assets/js/92.fd73ac02.js"><link rel="prefetch" href="/assets/js/93.3c7c9efd.js"><link rel="prefetch" href="/assets/js/94.838ec0d1.js"><link rel="prefetch" href="/assets/js/95.089a60b8.js"><link rel="prefetch" href="/assets/js/96.3a38e312.js"><link rel="prefetch" href="/assets/js/97.bb6c2fbe.js"><link rel="prefetch" href="/assets/js/98.b92e7f54.js"><link rel="prefetch" href="/assets/js/99.81a7b534.js">
    <link rel="stylesheet" href="/assets/css/0.styles.815e519c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">二求</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">主页</a></div><div class="nav-item"><a href="/article/" class="nav-link">博客文章</a></div><div class="nav-item"><a href="/algorithm/" class="nav-link">前端算法</a></div><div class="nav-item"><a href="/sourceCode/" class="nav-link">源码释界</a></div><div class="nav-item"><a href="/learnRecord/" class="nav-link">学习笔记</a></div><div class="nav-item"><a href="/interviewQuestions/" class="nav-link router-link-active">前端知识体系</a></div><div class="nav-item"><a href="/weekRead/" class="nav-link">每周阅读</a></div><div class="nav-item"><a href="https://github.com/Rashomon511" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="/about/" class="nav-link">关于</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">主页</a></div><div class="nav-item"><a href="/article/" class="nav-link">博客文章</a></div><div class="nav-item"><a href="/algorithm/" class="nav-link">前端算法</a></div><div class="nav-item"><a href="/sourceCode/" class="nav-link">源码释界</a></div><div class="nav-item"><a href="/learnRecord/" class="nav-link">学习笔记</a></div><div class="nav-item"><a href="/interviewQuestions/" class="nav-link router-link-active">前端知识体系</a></div><div class="nav-item"><a href="/weekRead/" class="nav-link">每周阅读</a></div><div class="nav-item"><a href="https://github.com/Rashomon511" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="/about/" class="nav-link">关于</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/interviewQuestions/Javascript.html" class="sidebar-link">JavaScript</a></li><li><a href="/interviewQuestions/Javascript手写.html" class="sidebar-link">JavaScript手写</a></li><li><a href="/interviewQuestions/Css.html" class="sidebar-link">CSS</a></li><li><a href="/interviewQuestions/Html.html" class="sidebar-link">HTML</a></li><li><a href="/interviewQuestions/浏览器相关.html" class="sidebar-link">浏览器相关</a></li><li><a href="/interviewQuestions/计算机网络.html" class="sidebar-link">计算机网络</a></li><li><a href="/interviewQuestions/前端框架.html" class="sidebar-link">前端框架</a></li><li><a href="/interviewQuestions/前端工程.html" class="active sidebar-link">前端工程</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/interviewQuestions/前端工程.html#前端工程" class="sidebar-link">前端工程</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/interviewQuestions/前端工程.html#webpack介绍" class="sidebar-link">webpack介绍</a></li><li class="sidebar-sub-header"><a href="/interviewQuestions/前端工程.html#webpack构建流程" class="sidebar-link">webpack构建流程</a></li><li class="sidebar-sub-header"><a href="/interviewQuestions/前端工程.html#loader和plugin" class="sidebar-link">loader和plugin</a></li><li class="sidebar-sub-header"><a href="/interviewQuestions/前端工程.html#bundle-chunk，module" class="sidebar-link">bundle,chunk，module</a></li><li class="sidebar-sub-header"><a href="/interviewQuestions/前端工程.html#webpack配置跨域" class="sidebar-link">webpack配置跨域</a></li><li class="sidebar-sub-header"><a href="/interviewQuestions/前端工程.html#webpack模块热更新" class="sidebar-link">webpack模块热更新</a></li><li class="sidebar-sub-header"><a href="/interviewQuestions/前端工程.html#hmr实现原理" class="sidebar-link">HMR实现原理</a></li><li class="sidebar-sub-header"><a href="/interviewQuestions/前端工程.html#sourcemap的工作原理" class="sidebar-link">sourceMap的工作原理</a></li><li class="sidebar-sub-header"><a href="/interviewQuestions/前端工程.html#tree-shaking" class="sidebar-link">Tree-Shaking</a></li><li class="sidebar-sub-header"><a href="/interviewQuestions/前端工程.html#code-spliting" class="sidebar-link">Code Spliting</a></li><li class="sidebar-sub-header"><a href="/interviewQuestions/前端工程.html#webpack性能优化" class="sidebar-link">webpack性能优化</a></li><li class="sidebar-sub-header"><a href="/interviewQuestions/前端工程.html#ast" class="sidebar-link">AST</a></li><li class="sidebar-sub-header"><a href="/interviewQuestions/前端工程.html#babel编译原理" class="sidebar-link">babel编译原理</a></li><li class="sidebar-sub-header"><a href="/interviewQuestions/前端工程.html#babel、babel-polyfill的区别" class="sidebar-link">babel、babel-polyfill的区别</a></li><li class="sidebar-sub-header"><a href="/interviewQuestions/前端工程.html#webpack与grunt、gulp区别" class="sidebar-link">webpack与grunt、gulp区别</a></li></ul></li></ul></li><li><a href="/interviewQuestions/安全与性能.html" class="sidebar-link">安全与性能</a></li><li><a href="/interviewQuestions/Node.html" class="sidebar-link">Node</a></li><li><a href="/interviewQuestions/版本控制.html" class="sidebar-link">版本控制</a></li><li><a href="/interviewQuestions/测试相关.html" class="sidebar-link">测试相关</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="前端工程"><a href="#前端工程" aria-hidden="true" class="header-anchor">#</a> 前端工程</h2> <p><a name="ggXDq"></a></p> <h3 id="webpack介绍"><a href="#webpack介绍" aria-hidden="true" class="header-anchor">#</a> webpack介绍</h3> <p><a name="ppBT8"></a></p> <h5 id="webpack概念"><a href="#webpack概念" aria-hidden="true" class="header-anchor">#</a> webpack概念</h5> <blockquote><p>本质上，webpack 是一个现代 JavaScript 应用程序的静态模块打包器(module bundler)，将项目当作一个整体，通过一个给定的的主文件，webpack将从这个文件开始找到你的项目的所有依赖文件，使用loaders处理它们，最后打包成一个或多个浏览器可识别的js文件</p></blockquote> <p>组成：</p> <ul><li>入口(entry)<br>入口起点(entry point)指示 webpack 应该使用哪个模块，来作为构建其内部依赖图的开始</li> <li>输出(output)<br>output 属性告诉 webpack 在哪里输出它所创建的 bundles ，以及如何命名这些文件，默认值为 ./dist</li> <li>loader<br>loader 让 webpack 能够去处理那些非 JavaScript 文件（webpack 自身只理解 JavaScript）</li> <li>插件(plugins)<br>loader 被用于转换某些类型的模块，而插件则可以用于执行范围更广的任务。插件的范围包括，从打包优化和压缩，一直到重新定义环境中的变量</li> <li>模式<br>通过选择 development 或 production 之中的一个，来设置 mode 参数，你可以启用相应模式下的 webpack 内置的优化</li> <li>devtool<br>用于控制是否以及如何生成源代码映射，可以帮助开发快速定位错误</li></ul> <p><a name="TR1ZF"></a></p> <h3 id="webpack构建流程"><a href="#webpack构建流程" aria-hidden="true" class="header-anchor">#</a> webpack构建流程</h3> <ol><li>初始化参数：从配置文件和 Shell 语句中读取与合并参数，得出最终的参数</li> <li>开始编译：用上一步得到的参数初始化 Compiler 对象，加载所有配置的插件，执行对象的 run 方法开始执行编译</li> <li>确定入口：根据配置中的 entry 找出所有的入口文件</li> <li>编译模块：从入口文件出发，调用所有配置的 Loader 对模块进行翻译，再找出该模块依赖的模块，再递归本步骤直到所有入口依赖的文件都经过了本步骤的处理</li> <li>完成模块编译：在经过第4步使用 Loader 翻译完所有模块后，得到了每个模块被翻译后的最终内容以及它们之间的依赖关系</li> <li>输出资源：根据入口和模块之间的依赖关系，组装成一个个包含多个模块的 Chunk，再把每个 Chunk 转换成一个单独的文件加入到输出列表，这步是可以修改输出内容的最后机会</li> <li>输出完成：在确定好输出内容后，根据配置确定输出的路径和文件名，把文件内容写入到文件系统</li></ol> <blockquote><p>在以上过程中，Webpack 会在特定的时间点广播出特定的事件，插件在监听到感兴趣的事件后会执行特定的逻辑，并且插件可以调用 Webpack 提供的 API 改变 Webpack 的运行结果</p></blockquote> <p><a name="mVng9"></a></p> <h3 id="loader和plugin"><a href="#loader和plugin" aria-hidden="true" class="header-anchor">#</a> loader和plugin</h3> <p><strong>常见loader</strong></p> <ul><li>css-loader：加载 CSS，支持模块化、压缩、文件导入等特性</li> <li>style-loader：把 CSS 代码注入到 JavaScript 中，通过 DOM 操作去加载 CSS</li> <li>slint-loader：通过 SLint 检查 JavaScript 代码</li> <li>babel-loader：把 ES6 转换成 ES5</li> <li>file-loader：把文件输出到一个文件夹中，在代码中通过相对 URL 去引用输出的文件</li> <li>url-loader：和 file-loader 类似，但是能在文件很小的情况下以 base64 的方式把文件内容注入到代码中去</li></ul> <p><strong>常见plugin</strong></p> <ul><li>define-plugin：定义环境变量</li> <li>commons-chunk-plugin：提取公共代码</li> <li>open-browser-webpack-plugin: 自动打开浏览器</li> <li>clean-webpack-plugin： 清除文件</li> <li>html-webpack-plugin： 向文件中插入html</li></ul> <p><strong>loader和plugin的区别</strong> <a name="OmS6I"></a></p> <h5 id="loader-加载器"><a href="#loader-加载器" aria-hidden="true" class="header-anchor">#</a> loader 加载器</h5> <p>loader是指webpack打包方案，对于很多文件例如less,icon，图片等webpack不知道如何打包，通过loader来告诉webapck如何打包，让 webpack 拥有了加载和解析非 JavaScript 文件的能力<br>在 module.rules 中配置，也就是说他作为模块的解析规则而存在，类型为数组
<a name="9BMyT"></a></p> <h5 id="plugin-插件"><a href="#plugin-插件" aria-hidden="true" class="header-anchor">#</a> Plugin 插件</h5> <p>plugin是指插件包，plugins里面的插件会帮助我们做一些其他的事情， 让 webpack 具有更多的灵活性，提升开发效率。<br>在 plugins 中单独配置。类型为数组，每一项是一个 plugin 的实例，参数都通过构造函数传入<br>对于loader，它就是一个转换器，将A文件进行编译形成B文件，这里操作的是文件，比如将A.scss或A.less转变为B.css，单纯的文件转换过程<br>plugin是一个扩展器，它丰富了wepack本身，针对是loader结束后，webpack打包的整个过程，它并不直接操作文件，而是基于事件机制工作，会监听webpack打包过程中的某些节点，执行广泛的任务。</p> <p><a name="svFQ7"></a></p> <h3 id="bundle-chunk，module"><a href="#bundle-chunk，module" aria-hidden="true" class="header-anchor">#</a> bundle,chunk，module</h3> <p><br>bundle 是由 webpack 打包出来的文件，chunk 是指 webpack 在进行模块的依赖分析的时候，代码分割出来的代码块。module是开发中的单个模块</p> <p><a name="VMLlO"></a></p> <h3 id="webpack配置跨域"><a href="#webpack配置跨域" aria-hidden="true" class="header-anchor">#</a> webpack配置跨域</h3> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>    devServer<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        contentBase<span class="token punctuation">:</span> <span class="token string">'./dist'</span><span class="token punctuation">,</span>  <span class="token comment">// 起一个在dist文件夹下的服务器</span>
        open<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>    <span class="token comment">// 自动打开浏览器并访问服务器地址</span>
        proxy<span class="token punctuation">:</span> <span class="token punctuation">{</span>   <span class="token comment">// 跨域代理</span>
            <span class="token string">'/api'</span><span class="token punctuation">:</span> <span class="token string">'http: //localhost:3000'</span>  <span class="token comment">// 如果使用/api,会被转发（代理）到该地址</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        port<span class="token punctuation">:</span> <span class="token number">8080</span><span class="token punctuation">,</span>
        hot<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>  <span class="token comment">// 开启HMR功能</span>
        hotOnly<span class="token punctuation">:</span> <span class="token boolean">true</span>  <span class="token comment">// 即使HMR不生效，也不自动刷新</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p><a name="hhcA6"></a></p> <h3 id="webpack模块热更新"><a href="#webpack模块热更新" aria-hidden="true" class="header-anchor">#</a> webpack模块热更新</h3> <p>HMR的有两种实现方式，一种是通过插件HotModuleReplacementPlugin和devserver配和实现，一种是通过在自定义开发服务下，使用插件webpack-dev-middleware和webpack-Hot-middleware配合实现HMR</p> <p><a href="https://www.yuque.com/rashomon/zcosda/fxgwug#3ea057cd" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a><strong>通过插件HotModuleReplacementPlugin()</strong></p> <p>1.配置<br>在webpack.config.js中配置devServer</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>devServer<span class="token punctuation">:</span> <span class="token punctuation">{</span>
		contentBase<span class="token punctuation">:</span> <span class="token string">'./dist'</span><span class="token punctuation">,</span>  <span class="token comment">// 起一个在dist文件夹下的服务器</span>
		open<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>  <span class="token comment">// 自动打开浏览器并访问服务器地址</span>
		port<span class="token punctuation">:</span> <span class="token number">8085</span><span class="token punctuation">,</span>
                hot<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>      <span class="token comment">// 开启HMR功能</span>
                 hotOnly<span class="token punctuation">:</span> <span class="token boolean">true</span>   <span class="token comment">// 即使HMR不生效，也不自动刷新</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>pluginsp配置中使用HotModuleReplacementPlugin插件</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>
   <span class="token operator">...</span><span class="token comment">// 其他插件</span>
    <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>HotModuleReplacementPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>2.判断<br>然后进行手动判断进行模块热更新，如果你不想做以下判断那么可以使用module.hot.accept()，整个项目做hmr只要有代码变化就进行更新。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">if</span><span class="token punctuation">(</span>module<span class="token punctuation">.</span>hot<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    module<span class="token punctuation">.</span>hot<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span><span class="token string">'./number'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// 使用更新过的 library 模块执行某些操作...</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>3.启动<br>最重要一点不要忘了修改启动命令</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token string">&quot;start&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;webpack-dev-server&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>此时运行npm start,即可实现模块热更新</p> <p><a href="https://www.yuque.com/rashomon/zcosda/fxgwug#6d234ef5" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a><strong>通过 Node.js API</strong></p> <p>通过自己在本地搭建一个服务器，利用webpack-dev-middleware和webpack-Hot-middleware两个插件来配合实现HMR.<br>1.安装</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 安装express, webpack-dev-middleware , webpack-Hot-middleware</span>
cnpm install express webpack<span class="token operator">-</span>dev<span class="token operator">-</span>middleware webpack<span class="token operator">-</span>Hot<span class="token operator">-</span>middleware <span class="token operator">-</span><span class="token constant">D</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>2.配置dev.server.js<br>dev.server.js</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> webpackDevMiddleware <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack-dev-middleware'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> webpackHotMiddleware <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;webpack-Hot-middleware&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> config <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./webpack.dev.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> complier <span class="token operator">=</span> <span class="token function">webpack</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// 编译器，编译器执行一次就会重新打包一下代码</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 生成一个实例</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span>devServer<span class="token punctuation">:</span> <span class="token punctuation">{</span>port<span class="token punctuation">,</span> contentBase<span class="token punctuation">}</span><span class="token punctuation">}</span> <span class="token operator">=</span> config
<span class="token keyword">const</span> <span class="token constant">DIST_DIR</span> <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'../'</span><span class="token punctuation">,</span> contentBase<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 设置静态访问文件路径</span>
<span class="token comment">// 等同于const DIST_DIR = path.resolve(__dirname, '../dist');</span>


<span class="token keyword">let</span> devMiddleware <span class="token operator">=</span> <span class="token function">webpackDevMiddleware</span><span class="token punctuation">(</span>complier<span class="token punctuation">,</span> <span class="token punctuation">{</span>  <span class="token comment">// 使用编译器</span>
    publicPath<span class="token punctuation">:</span> config<span class="token punctuation">.</span>output<span class="token punctuation">.</span>publicPath<span class="token punctuation">,</span>
    quiet<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">//向控制台显示任何内容</span>
    noInfo<span class="token punctuation">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">let</span> hotMiddleware <span class="token operator">=</span> <span class="token function">webpackHotMiddleware</span><span class="token punctuation">(</span>complier<span class="token punctuation">,</span><span class="token punctuation">{</span>
    log<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    heartbeat<span class="token punctuation">:</span> <span class="token number">2000</span>
 <span class="token punctuation">}</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>devMiddleware<span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>hotMiddleware<span class="token punctuation">)</span>

<span class="token comment">// 设置访问静态文件的路径</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>express<span class="token punctuation">.</span><span class="token function">static</span><span class="token punctuation">(</span><span class="token constant">DIST_DIR</span><span class="token punctuation">)</span><span class="token punctuation">)</span>


app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span>port<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;成功启动：localhost:&quot;</span><span class="token operator">+</span> port<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>  <span class="token comment">//监听端口</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br></div></div><p>webpack.dev.js配置</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
        entry<span class="token punctuation">:</span> <span class="token punctuation">{</span>             <span class="token comment">// 入口文件配置</span>
        <span class="token comment">//实现刷新浏览器webpack-hot-middleware/client?noInfo=true&amp;reload=true 是必填的</span>
        main<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'webpack-hot-middleware/client?noInfo=true&amp;reload=true'</span><span class="token punctuation">,</span> <span class="token string">'./src/index.js'</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
       devServer<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        contentBase<span class="token punctuation">:</span> <span class="token string">'dist'</span><span class="token punctuation">,</span>
        port<span class="token punctuation">:</span> <span class="token number">8081</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
       plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>  
        <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>NamedModulesPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>  <span class="token comment">//用于启动HMR时可以显示模块的相对路径</span>
        <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>HotModuleReplacementPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
        <span class="token keyword">new</span> <span class="token class-name">OpenBrowserPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span> url<span class="token punctuation">:</span> <span class="token string">'http://localhost:8081'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// 自动打开浏览器</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token operator">...</span><span class="token comment">// 其他配置</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>完整实现在<a href="https://github.com/LuoShengMen/React-Whole-barrels" target="_blank" rel="noopener noreferrer">这里<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><a href="https://www.yuque.com/rashomon/zcosda/fxgwug#1aa3a8b7" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a><strong>webpack-hot-middleware的配置项</strong></p> <p>配置项可以通过query 方式添加到webpack config中的路径来传递给客户端<br>配置项都有</p> <ul><li>path - 中间件为事件流提供的路径</li> <li>name - 捆绑名称，专门用于多编译器模式</li> <li>timeout - 尝试重新连接后断开连接后等待的时间</li> <li>overlay - 设置为false禁用基于DOM的客户端覆盖。</li> <li>reload - 设置为true在Webpack卡住时自动重新加载页面。</li> <li>noInfo - 设置为true禁用信息控制台日志记录。</li> <li>quiet - 设置为true禁用所有控制台日志记录。</li> <li>dynamicPublicPath - 设置为true使用webpack publicPath作为前缀path。（我们可以<strong>webpack_public_path</strong>在入口点的运行时动态设置，参见output.- publicPath的注释）</li> <li>autoConnect - 设置为false用于防止从客户端自动打开连接到Webpack后端 - 如果需要使用该setOptionsAndConnect功能修改选项</li></ul> <p>通过传递第二个参数，可以将配置选项传递给中间件</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token function">webpackHotMiddleware</span><span class="token punctuation">(</span>webpack<span class="token punctuation">,</span><span class="token punctuation">{</span>
    log<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    path<span class="token punctuation">:</span> <span class="token string">&quot;/__what&quot;</span><span class="token punctuation">,</span>
    heartbeat<span class="token punctuation">:</span> <span class="token number">2000</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li>log - 用于记录行的函数，传递false到禁用。默认为console.log</li> <li>path - 中间件将服务事件流的路径必须与客户端设置相匹配</li> <li>heartbeat - 多长时间将心跳更新发送到客户端以保持连接的活动。应小于客户的timeout设置 - 通常设置为其一半值。<br>
更多配置在这里<a href="https://github.com/webpack-contrib/webpack-hot-middleware" target="_blank" rel="noopener noreferrer">webpack-hot-middleware<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <blockquote><p>注意：通过express启动服务器后，devServer中的配置就不起作用了。</p></blockquote> <p>3.启动命令</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token string">&quot;start&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;node ./build/dev-server.js&quot;</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>启动命令npm start，即可实现HMR的功能</p> <p><a name="0793e579"></a></p> <h3 id="hmr实现原理"><a href="#hmr实现原理" aria-hidden="true" class="header-anchor">#</a> <a href="https://www.yuque.com/rashomon/zcosda/fxgwug#0793e579" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>HMR实现原理</h3> <p>1.HMR的更新流程</p> <ul><li>修改了一个或多个文件。</li> <li>文件系统接收更改并通知Webpack。</li> <li>Webpack重新编译构建一个或多个模块，并通知HMR服务器进行了更新。</li> <li>HMR Server使用websockets通知HMR Runtime需要更新。（HMR运行时通过HTTP请求这些更新。）</li> <li>HMR运行时再替换更新中的模块。如果确定这些模块无法更新，则触发整个页面刷新</li></ul> <p>2.HMR 工作流程图解<br>此为更加详细的流程分析：<br><img src="https://cdn.nlark.com/yuque/0/2019/png/218767/1566985235560-f2ca2465-d248-423c-bc7d-5696c4da32ef.png#align=left&amp;display=inline&amp;height=749&amp;originHeight=749&amp;originWidth=720&amp;size=0&amp;status=done&amp;width=720" alt=""><br>上图是webpack 配合 webpack-dev-server 进行应用开发的模块热更新流程图。</p> <ul><li>上图底部红色框内是服务端，而上面的橙色框是浏览器端。</li> <li>绿色的方框是 webpack 代码控制的区域。蓝色方框是 webpack-dev-server 代码控制的区域，洋红色的方框是文件系统，文件修改后的变化就发生在这，而青色的方框是应用本身<br>
步骤分析：</li> <li>第一步，在 webpack 的 watch 模式下，文件系统中某一个文件发生修改，webpack 监听到文件变化，根据配置文件对模块重新编译打包，并将打包后的代码通过简单的 JavaScript 对象保存在内存中。</li> <li>第二步是 webpack-dev-server 和 webpack 之间的接口交互，而在这一步，主要是 dev-server 的中间件 webpack-dev-middleware 和 webpack 之间的交互，webpack-dev-middleware 调用 webpack 暴露的 API对代码变化进行监控，并且告诉 webpack，将代码打包到内存中。</li> <li>第三步是 webpack-dev-server 对文件变化的一个监控，这一步不同于第一步，并不是监控代码变化重新打包。当我们在配置文件中配置了devServer.watchContentBase 为 true 的时候，Server 会监听这些配置文件夹中静态文件的变化，变化后会通知浏览器端对应用进行 live reload。注意，这儿是浏览器刷新，和 HMR 是两个概念。</li> <li>第四步也是 webpack-dev-server 代码的工作，该步骤主要是通过 sockjs（webpack-dev-server 的依赖）在浏览器端和服务端之间建立一个 websocket 长连接，将 webpack 编译打包的各个阶段的状态信息告知浏览器端，同时也包括第三步中 Server 监听静态文件变化的信息。浏览器端根据这些 socket 消息进行不同的操作。当然服务端传递的最主要信息还是新模块的 hash 值，后面的步骤根据这一 hash 值来进行模块热替换。</li> <li>webpack-dev-server/client 端并不能够请求更新的代码，也不会执行热更模块操作，而把这些工作又交回给了 webpack，webpack/hot/dev-server 的工作就是根据 webpack-dev-server/client 传给它的信息以及 dev-server 的配置决定是刷新浏览器呢还是进行模块热更新。当然如果仅仅是刷新浏览器，也就没有后面那些步骤了。</li> <li>HotModuleReplacement.runtime 是客户端 HMR 的中枢，它接收到上一步传递给他的新模块的 hash 值，它通过 JsonpMainTemplate.runtime 向 server 端发送 Ajax 请求，服务端返回一个 json，该 json 包含了所有要更新的模块的 hash 值，获取到更新列表后，该模块再次通过 jsonp 请求，获取到最新的模块代码。这就是上图中 7、8、9 步骤。</li> <li>而第 10 步是决定 HMR 成功与否的关键步骤，在该步骤中，HotModulePlugin 将会对新旧模块进行对比，决定是否更新模块，在决定更新模块后，检查模块之间的依赖关系，更新模块的同时更新模块间的依赖引用。</li> <li>最后一步，当 HMR 失败后，回退到 live reload 操作，也就是进行浏览器刷新来获取最新打包代码。</li></ul> <p><a name="FlXGy"></a></p> <h3 id="sourcemap的工作原理"><a href="#sourcemap的工作原理" aria-hidden="true" class="header-anchor">#</a> <a href="https://www.cnblogs.com/Wayou/p/understanding_frontend_source_map.html" target="_blank" rel="noopener noreferrer">sourceMap的工作原理<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h3> <p><br>sourceMap本质上是一种映射关系，打包出来的js文件中的代码可以映射到代码文件的具体位置。例如在打包后有代码错误，这种映射关系会帮助我们直接找到在源代码中的错误</p> <p><a name="Pblrk"></a></p> <h3 id="tree-shaking"><a href="#tree-shaking" aria-hidden="true" class="header-anchor">#</a> <a href="https://github.com/LuoShengMen/StudyNotes/issues/457" target="_blank" rel="noopener noreferrer">Tree-Shaking<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h3> <p>Tree Shaking可以剔除掉一个文件中未被引用掉部分(在producton环境下才会提出)，并且只支持ES Modules模块的引入方式，不支持CommonJS的引入方式。原因：ES Modules是静态引入的方式，CommonJS是动态的引入方式，Tree Shaking只支持静态引入方式。<br>在开发环境下需要在webpack中配置，但是在生成环境下，由于已有默认配置可以不配置optimization，但是sideEffects依然需要配置</p> <p><a name="w4n2g"></a></p> <h3 id="code-spliting"><a href="#code-spliting" aria-hidden="true" class="header-anchor">#</a> Code Spliting</h3> <p>使用Code Spliting可以有两种方式<br>第一手动实现：<br>配置</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>entry<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        lodash<span class="token punctuation">:</span> <span class="token string">'./src/lodash.js'</span><span class="token punctuation">,</span>
        main<span class="token punctuation">:</span> <span class="token string">'./src/index.js'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// 入口文件</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>lodash.js</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> _ <span class="token keyword">from</span> <span class="token string">'lodash'</span><span class="token punctuation">;</span>
window<span class="token punctuation">.</span>_ <span class="token operator">=</span> _<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>第二：使用optimization<br>同步代码：只需要在webpack中做optimization配置即可<br>异步代码：无需做任何配置，会自动进行代码分割，放入dist目录中</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>optimization<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        splitChunks<span class="token punctuation">:</span> <span class="token punctuation">{</span>
            chunks<span class="token punctuation">:</span> <span class="token string">'all'</span>  <span class="token comment">// 遇到公用当类库时，自动的Code Spliting</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><a name="Y4w8S"></a></p> <h3 id="webpack性能优化"><a href="#webpack性能优化" aria-hidden="true" class="header-anchor">#</a> webpack性能优化</h3> <ul><li>1.跟上技术的迭代更新</li> <li>2.尽可能少的模块使用loader</li> <li>3.plugin尽可能精简并保证可靠<br>
例如尽可能使用官方的插件，并在合适的环境下使用对象的插件</li> <li>4.resolve参数合理配置<br>
当通过import child from './child/child'形式引入文件时，会先去寻找.js为后缀当文件，再去寻找.jsx为后缀的文件</li></ul> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>resolve<span class="token punctuation">:</span> <span class="token punctuation">{</span>
   extensions<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'.js'</span><span class="token punctuation">,</span> <span class="token string">'.jsx'</span><span class="token punctuation">]</span>，
  mainFiles<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'index'</span><span class="token punctuation">,</span> <span class="token string">'child'</span><span class="token punctuation">]</span>，  <span class="token comment">// 如果是直接引用一个文件夹，那么回去直接找index开头的文件，如果不存在再去找child开头的文件</span>
  alias<span class="token punctuation">:</span> <span class="token punctuation">{</span>
   roshomon<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'../src/child'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 别名替换，引入roshomon其实是引入../src/child</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ul><li>5.使用DellPlugin提高打包速度<br>
对于第三方库，只打包分析一次，后面的每次打包都不会重复打包第三方库<br>
webpack.dll.js</li></ul> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
	mode<span class="token punctuation">:</span> <span class="token string">'production'</span><span class="token punctuation">,</span>
	entry<span class="token punctuation">:</span> <span class="token punctuation">{</span>
		vendors<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'lodash'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
		react<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'react'</span><span class="token punctuation">,</span> <span class="token string">'react-dom'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
		jquery<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'jquery'</span><span class="token punctuation">]</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
		filename<span class="token punctuation">:</span> <span class="token string">'[name].dll.js'</span><span class="token punctuation">,</span>
		path<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'../dll'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
		library<span class="token punctuation">:</span> <span class="token string">'[name]'</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>
		<span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>DllPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token comment">// 使用该插件分析第三方库，并把库里面的映射关系放到[name].manifest.json里，并放在dll文件里</span>
			name<span class="token punctuation">:</span> <span class="token string">'[name]'</span><span class="token punctuation">,</span>
			path<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'../dll/[name].manifest.json'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span>
	<span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><p>webpack.common.js</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 引用</span>
<span class="token keyword">const</span> AddAssetHtmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'add-asset-html-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// plugins配置</span>
<span class="token operator">...</span><span class="token punctuation">.</span>
<span class="token keyword">const</span> plugins <span class="token operator">=</span> <span class="token punctuation">[</span>
	<span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
		template<span class="token punctuation">:</span> <span class="token string">'src/index.html'</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
	<span class="token keyword">new</span> <span class="token class-name">CleanWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'dist'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
		root<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'../'</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> files <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">readdirSync</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'../dll'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
files<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">file</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token regex">/.*\.dll.js/</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		plugins<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">AddAssetHtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>  <span class="token comment">// 将dll.js文件自动引入html</span>
			filepath<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'../dll'</span><span class="token punctuation">,</span> file<span class="token punctuation">)</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token regex">/.*\.manifest.json/</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		plugins<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>DllReferencePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token comment">// 当打包第三方库时，会去manifest.json文件中寻找映射关系，如果找到了那么就直接从全局变量(即打包文件)中拿过来用就行，不用再进行第三方库的分析，以此优化打包速度</span>
			manifest<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'../dll'</span><span class="token punctuation">,</span> file<span class="token punctuation">)</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><p>package.json</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token string">&quot;build:dll&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;webpack --config ./build/webpack.dll.js&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>6.控制包文件大小<br>
可以通过treeShaking或者拆分文件来优化打包速度</li> <li>7.thread-loader, parallel-webpack,happywebpack多进程打包</li> <li>8.合理使用sourceMap</li> <li>9.结合stats分析打包结果<br>
通过命令生成一个关于打包情况的stats文件，并借助工具进行打包情况分析，通过分析打包的流程对相应内容进行优化</li> <li>10.开发环境内存编译</li> <li>11.开发环境无用插件剔除</li></ul> <p><a name="e9NSY"></a></p> <h3 id="ast"><a href="#ast" aria-hidden="true" class="header-anchor">#</a> AST</h3> <p>抽象语法树 (Abstract Syntax Tree)，是将代码逐字母解析成 树状对象 的形式。这是语言之间的转换、代码语法检查，代码风格检查，代码格式化，代码高亮，代码错误提示，代码自动补全等等的基础<br><strong>es6转es5</strong><br>将ES6的代码转换为AST语法树，然后再将ES6 AST转为ES5 AST，再将AST转为代码</p> <p><a name="Getlq"></a></p> <h3 id="babel编译原理"><a href="#babel编译原理" aria-hidden="true" class="header-anchor">#</a> babel编译原理</h3> <p><br>babylon 将 ES6/ES7 代码解析成 AST<br>babel-traverse 对 AST 进行遍历转译，得到新的 AST<br>新 AST 通过 babel-generator 转换成 ES5<br>或者：</p> <ol><li>它就是个编译器，输入语言是ES6+，编译目标语言是ES5</li> <li>babel 官方工作原理</li> <li>解析：将代码字符串解析成抽象语法树</li> <li>变换：对抽象语法树进行变换操作</li> <li>再建：根据变换后的抽象语法树再生成代码字符串</li></ol> <br> <a name="d0YDz"></a>
### babel-profilly和babel-transform-runtime的区别 
<br>一、babel-polyfill<br>由于babel默认只转换新的JavaScript语法，但对于一些新的API是不进行转化的（比如内建的Promise、WeakMap，静态方法如Array.from或者Object.assign），那么为了能够转化这些东西，我们就需要使用babel-polyfill这个插件<br>由于babel-polyfill是个运行时垫片，所以需要声明在dependencies而非devDependencies里<br>二、babel-plugin-transform-runtime<br>由于使用babel-polyfill，会产生以下问题：<br>1）babel-polyfill会将需要转化的API进行直接转化，这就导致用到这些API的地方会存在大量的重复代码<br>2）babel-polyfill是直接在全局作用域里进行垫片，所以会污染全局作用域<br>所以，babel同时提供了babel-plugin-transform-runtime这一插件，它的好处在于：<br>1）需要用到的垫片，会使用引用的方式引入，而不是直接替换，避免了垫片代码的重复<br>2）由于使用引用的方式引入，所以不会直接污染全局作用域。这就对于库和工具的开发带来了好处<br>但是babel-plugin-transform-runtime仍然不能单独作用。因为有一些静态方法，如&quot;foobar&quot;.includes(&quot;foo&quot;)仍然需要引入babel-polyfill才能使用
<p><a name="udPQY"></a></p> <h3 id="babel、babel-polyfill的区别"><a href="#babel、babel-polyfill的区别" aria-hidden="true" class="header-anchor">#</a> babel、babel-polyfill的区别</h3> <p><br>babel-polyfill：模拟一个es6环境，提供内置对象如Promise和WeakMap<br>引入babel-polyfill全量包后文件会变得非常大。它提供了诸如 Promise，Set 以及 Map 之类的内置插件，这些将污染全局作用域,可以编译原型链上的方法。<br>babel-plugin-transform-runtime &amp; babel-runtime：转译器将这些内置插件起了别名 core-js，这样你就可以无缝的使用它们，并且无需使用 polyfill。但是无法编译原型链上的方法<br>runtime 编译器插件做了以下三件事：</p> <ul><li>当你使用 generators/async 函数时，自动引入 babel-runtime/regenerator 。</li> <li>自动引入 babel-runtime/core-js 并映射 ES6 静态方法和内置插件。</li> <li>移除内联的 Babel helper 并使用模块 babel-runtime/helpers 代替。</li></ul> <p><a name="NUBuz"></a></p> <h3 id="webpack与grunt、gulp区别"><a href="#webpack与grunt、gulp区别" aria-hidden="true" class="header-anchor">#</a> webpack与grunt、gulp区别</h3> <p><strong>gulp、grunt</strong><br>gulp和grunt强调的是前端开发的工作流程，我们可以通过配置一系列的task，定义task处理的事务（例如文件压缩合并、雪碧图、启动server、版本控制等），然后定义执行顺序，来让gulp执行这些task，从而构建项目的整个前端开发流程。<br>PS：简单说就一个Task Runner<br><strong>webpack</strong><br>webpack是一个前端模块化方案，更侧重模块打包，我们可以把开发中的所有资源（图片、js文件、css文件等）都看成模块，通过loader（加载器）和plugins（插件）对资源进行处理，打包成符合生产环境部署的前端资源。<br>PS：webpack is a module bundle<br><strong>相同功能</strong></p> <ul><li>文件合并与压缩（css）</li> <li>文件合并与压缩（js）</li> <li>sass/less预编译</li> <li>启动server</li> <li>版本控制</li></ul> <p><strong>两者区别</strong><br>虽然都是前端自动化构建工具，但看他们的定位就知道不是对等的。<br>gulp严格上讲，模块化不是他强调的东西，他旨在规范前端开发流程。<br>webpack更是明显强调模块化开发，而那些文件压缩合并、预处理等功能，不过是他附带的功能。<br><strong>总结</strong><br>gulp应该与grunt比较，而webpack应该与browserify（网上太多资料就这么说，这么说是没有错，不过单单这样一句话并不能让人清晰明了）。<br>gulp与webpack上是互补的，还是可替换的，取决于你项目的需求。如果只是个vue或react的单页应用，webpack也就够用；如果webpack某些功能使用起来麻烦甚至没有（雪碧图就没有），那就可以结合gulp一起用</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">最后更新时间: </span> <span class="time">10/8/2019, 7:41:17 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/interviewQuestions/前端框架.html" class="prev">
          前端框架
        </a></span> <span class="next"><a href="/interviewQuestions/安全与性能.html">
          安全与性能
        </a>
        →
      </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.d6d7bd30.js" defer></script><script src="/assets/js/2.b4f839d5.js" defer></script><script src="/assets/js/155.7872800c.js" defer></script>
  </body>
</html>
